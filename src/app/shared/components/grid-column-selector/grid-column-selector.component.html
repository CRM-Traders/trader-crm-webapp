<!-- src/app/shared/components/grid/grid-column-selector/grid-column-selector.component.html -->
<div
  class="column-selector overflow-y-auto h-48 p-4 bg-white dark:bg-gray-800 rounded-md shadow-lg border border-gray-300/30"
>
  <div class="flex justify-between items-center mb-4">
    <div class="flex items-center">
      <input
        type="checkbox"
        id="select-all-columns"
        [checked]="selectAll"
        (change)="toggleSelectAll($event)"
        class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"
      />
      <label
        for="select-all-columns"
        class="ml-2 text-sm font-medium text-gray-700 dark:text-gray-200"
      >
        Toggle All
      </label>
    </div>

    <div class="flex items-center gap-3">
      <div class="relative">
        <input
          type="search"
          [(ngModel)]="searchTerm"
          placeholder="Search columns..."
          class="w-48 sm:w-56 md:w-64 rounded-md border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm text-gray-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-400 px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"
        />
        <!-- <button
          *ngIf="searchTerm"
          type="button"
          (click)="searchTerm=''"
          class="absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300"
          aria-label="Clear search"
        >
          &times;
        </button> -->
      </div>

      <button
        (click)="resetToDefault()"
        class="text-sm text-primary-500 dark:text-primary-400 hover:text-primary-800 dark:hover:text-primary-300 focus:outline-none"
      >
        Reset to Default
      </button>
    </div>
  </div>

  <div
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-4 gap-y-3"
  >
    <ng-container *ngFor="let column of filteredColumns">
      @if (column.permission){
      <div class="flex items-center" *hasPermission="column.permission">
        <input
          type="checkbox"
          [id]="'column-' + column.field"
          [checked]="isColumnSelected(column)"
          (change)="toggleColumn(column, $event)"
          class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"
        />
        <label
          [for]="'column-' + column.field"
          class="ml-2 text-sm text-gray-700 dark:text-gray-200 truncate"
        >
          {{ column.header }}
        </label>
      </div>
      } @else{
      <div class="flex items-center">
        <input
          type="checkbox"
          [id]="'column-' + column.field"
          [checked]="isColumnSelected(column)"
          (change)="toggleColumn(column, $event)"
          class="h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600"
        />
        <label
          [for]="'column-' + column.field"
          class="ml-2 text-sm text-gray-700 dark:text-gray-200 truncate"
        >
          {{ column.header }}
        </label>
      </div>
      }
    </ng-container>
  </div>

  <div
    *ngIf="searchTerm && filteredColumns.length === 0"
    class="mt-3 text-sm text-gray-500 dark:text-gray-400"
  >
    No matching columns.
  </div>

  <div
    *ngIf="selectedColumns.length === 0"
    class="mt-3 text-sm text-red-600 dark:text-red-400"
  >
    Please select at least one column to display.
  </div>
</div>
